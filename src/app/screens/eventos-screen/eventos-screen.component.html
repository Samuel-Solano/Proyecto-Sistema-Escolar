<div class="wrapper main-content-maestros">
  <div class="header-home-maestros"></div>
  <div class="body-maestros">
    <!-- Encabezado con los títulos de bienvenida y rol del usuario -->
    <div class="row mt-5 mb-5">
      <div class="col-12">
        <span class="title-perfil">Bienvenido {{ name_user }}</span>
        <br />
        <span class="title-perfil">{{ rol }}</span>
      </div>
      <!-- Contenedor principal para la tabla de maestros -->
      <div class="container">
        <div class="row mt-3 mb-5" style="text-align: center">
          <div class="col-12">
            <div class="alert alert-primary" role="alert">
              <span class="title-table"
                >Lista de todos los eventos registrados.</span
              >
            </div>
          </div>
          <!-- Colocamos la tabla de maestros -->
          <ng-container *ngIf="lista_eventos.length > 0; else noData">
            <div class="table-scroll-wrapper">
              <div class="mat-elevation-z8">
                <!--filter-->
                <mat-form-field style="width: 100%; padding: 10px 20px 0 20px">
                  <mat-label>Buscar Eventos</mat-label>
                  <input
                    matInput
                    (keypress)="soloLetras($event)"
                    (keyup)="busquedaFiltro($event)"
                    placeholder="Escribe un nombre"
                    #input
                  />
                  <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
                <table
                  mat-table
                  matSort
                  [dataSource]="dataSource"
                  style="min-width: 1200px; width: 100%"
                >
                  <!-- 1era columna -->
                  <ng-container matColumnDef="nombre_evento">
                    <th
                      mat-header-cell
                      *matHeaderCellDef
                      mat-sort-header="nombre_evento"
                    >
                      Nombre Evento
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.nombre_evento }}
                    </td>
                  </ng-container>

                  <!-- 2da columna -->
                  <ng-container matColumnDef="tipo_evento">
                    <th
                      mat-header-cell
                      *matHeaderCellDef
                      mat-sort-header="tipo_evento"
                    >
                      Tipo de Evento
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.tipo_evento }}
                    </td>
                  </ng-container>

                  <!-- 3era columna -->
                  <ng-container matColumnDef="fecha">
                    <th
                      mat-header-cell
                      *matHeaderCellDef
                      mat-sort-header="fecha"
                    >
                      Fecha del Evento
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.fecha | date : "dd/MM/yyyy" : "UTC" }}
                    </td>
                  </ng-container>

                  <!-- 4ta columna -->
                  <ng-container matColumnDef="hora_inicio">
                    <th
                      mat-header-cell
                      *matHeaderCellDef
                      mat-sort-header="hora_inicio"
                    >
                      Hora de Inicio
                    </th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.hora_inicio }}
                    </td>
                  </ng-container>

                  <!-- 5ta columna -->
                  <ng-container matColumnDef="hora_fin">
                    <th mat-header-cell *matHeaderCellDef>Hora fin</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.hora_fin }}
                    </td>
                  </ng-container>

                  <!-- 6ta columna -->
                  <ng-container matColumnDef="lugar">
                    <th mat-header-cell *matHeaderCellDef>Lugar del Evento</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.lugar }}
                    </td>
                  </ng-container>

                  <!-- 7ma columna -->
                  <ng-container matColumnDef="publico_objetivo">
                    <th mat-header-cell *matHeaderCellDef>Publico Objetivo</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.publico_objetivo }}
                    </td>
                  </ng-container>

                  <!-- 8va columna -->
                  <ng-container matColumnDef="programa_educativo">
                    <th mat-header-cell *matHeaderCellDef>Programa</th>
                    <td mat-cell *matCellDef="let element">
                      <span *ngIf="element.programa_educativo">{{
                        element.programa_educativo.join(", ")
                      }}</span>
                    </td>
                  </ng-container>

                  <!-- 8va columna -->
                  <ng-container matColumnDef="responsable">
                    <th mat-header-cell *matHeaderCellDef>responsable</th>
                    <td mat-cell *matCellDef="let element">
                      {{ element.responsable }}
                    </td>
                  </ng-container>

                  <!-- Columna EDITAR -->
                  <ng-container matColumnDef="editar">
                    <th mat-header-cell *matHeaderCellDef>
                      <ng-container *ngIf="rol === 'administrador'">
                        Actualizar
                      </ng-container>
                    </th>
                    <td mat-cell *matCellDef="let element" class="td-editar">
                      <i
                        class="bi bi-pencil-square"
                        *ngIf="rol === 'administrador'"
                        (click)="goEditar(element.id)"
                      ></i>
                    </td>
                  </ng-container>

                  <!-- Columna ELIMINAR -->
                  <ng-container matColumnDef="eliminar">
                    <th mat-header-cell *matHeaderCellDef>
                      <ng-container *ngIf="rol === 'administrador'">
                        Eliminar
                      </ng-container>
                    </th>
                    <td mat-cell *matCellDef="let element" class="td-eliminar">
                      <i
                        class="bi bi-trash3-fill"
                        *ngIf="rol === 'administrador'"
                        (click)="delete(element.id)"
                      ></i>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                  ></tr>
                </table>
              </div>
              <!-- Colocamos la paginación de la tabla -->
              <mat-paginator
                [pageSizeOptions]="[5, 10, 20]"
                showFirstLastButtons
                aria-label="Select page of periodic elements"
                style="min-width: 1200px; width: 100%"
              >
              </mat-paginator>
            </div>
          </ng-container>
          <ng-template #noData>
            <div class="col-12">
              <div class="alert alert-warning" role="alert">
                No Eventos Registrados.
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
